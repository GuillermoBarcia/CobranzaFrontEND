<div
  class="bg-card flex min-w-0 flex-auto flex-col sm:absolute sm:inset-0 sm:overflow-hidden dark:bg-transparent"
>
  <div
    class="relative flex flex-0 flex-col px-6 py-8 sm:flex-row sm:items-center sm:justify-between md:px-8"
  >
    <lib-bread-crumb
      [items]="[
        { label: 'Cobranza', url: '/' },
        { label: 'Lista de Préstamo Maestro' }
      ]"
      titulo="Préstamos Maestro"
    />
  </div>

  <div class="flex justify-start mt-4">
    <lib-search (search)="onSearch()">
      <form [formGroup]="searchForm">
        <mat-form-field appearance="fill">
          <mat-label>Pagaré</mat-label>
          <input matInput type="text" formControlName="p" (input)="filterInput('p', $event)" [readonly]="isCedulaActive" />
           <button mat-icon-button *ngIf="searchForm.get('p')?.value" (click)="clearField('p')" matSuffix>
            <mat-icon>close</mat-icon>
          </button>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Cédula</mat-label>
          <input matInput type="text" formControlName="cedula" (input)="filterInput('cedula', $event)" [readonly]="isPagareActive" />
           <button mat-icon-button *ngIf="searchForm.get('cedula')?.value" (click)="clearField('cedula')" matSuffix>
            <mat-icon>close</mat-icon>
          </button>
        </mat-form-field>

        <button type="submit" style="display: none"></button>
      </form>
    </lib-search>
  </div>

  <div class="flex flex-auto overflow-hidden">
    <div
      class="flex flex-auto flex-col overflow-hidden px-6 sm:mb-18 sm:overflow-y-auto"
    >
      <table mat-table [dataSource]="dataSource" class="" matSort>
        <!-- Columnas -->
        <ng-container matColumnDef="numeroPagare">
          <th mat-header-cell *matHeaderCellDef>N. Pagaré</th>
          <td mat-cell *matCellDef="let element">
            {{ element.numeroPagare }}
          </td>
        </ng-container>

        <ng-container matColumnDef="identificacion">
          <th mat-header-cell *matHeaderCellDef>Cédula</th>
          <td mat-cell *matCellDef="let element">
            {{ element.identificacion }}
          </td>
        </ng-container>

        <ng-container matColumnDef="nombresApellidos">
          <th mat-header-cell *matHeaderCellDef>Nombres-Apellidos</th>
          <td mat-cell *matCellDef="let element">
            {{ element.nombresApellidos }}
          </td>
        </ng-container>

        <ng-container matColumnDef="montoAprobado">
          <th mat-header-cell *matHeaderCellDef>Monto Aprobado</th>
          <td mat-cell *matCellDef="let element">
            {{ element.montoAprobado | currency }}
          </td>
        </ng-container>

        <ng-container matColumnDef="montoDesembolsado">
          <th mat-header-cell *matHeaderCellDef>Monto Desembolsado</th>
          <td mat-cell *matCellDef="let element">
            {{ element.montoDesembolsado | currency }}
          </td>
        </ng-container>

        <ng-container matColumnDef="fechaAdjudicacion">
          <th mat-header-cell *matHeaderCellDef>Fecha Adjudicación</th>
          <td mat-cell *matCellDef="let element">
            {{ element.fechaAdjudicacion | date: 'dd/MM/yyyy' }}
          </td>
        </ng-container>

        <ng-container matColumnDef="fechaVencimiento">
          <th mat-header-cell *matHeaderCellDef>Fecha Vencimiento</th>
          <td mat-cell *matCellDef="let element">
            {{ element.fechaVencimiento | date: 'dd/MM/yyyy' }}
          </td>
        </ng-container>

        <ng-container matColumnDef="nombreOficina">
          <th mat-header-cell *matHeaderCellDef>Nombre Oficina</th>
          <td mat-cell *matCellDef="let element">
            {{ element.nombreOficina }}
          </td>
        </ng-container>

        <ng-container matColumnDef="cargo">
          <th mat-header-cell *matHeaderCellDef>Cargo</th>
          <td mat-cell *matCellDef="let element" class="center-icon">
            <button
              class="text-secondary"
              mat-icon-button
              [routerLink]="['/cobranzas', 'listar-prestamos-maestro', 'crear-cargo', element.numeroPagare]"
            >
              <mat-icon>badge</mat-icon>
            </button>
          </td>
        </ng-container>

        <!-- Cabecera y contenido -->
        <tr
          mat-header-row
          *matHeaderRowDef="displayedColumns"
          class="coro-table-header"
        ></tr>
        <tr
          mat-row
          *matRowDef="let row; columns: displayedColumns"
        ></tr>
      </table>

      <mat-paginator
        [pageSize]="10"
        [pageSizeOptions]="[5, 10, 25]"
        showFirstLastButtons
      ></mat-paginator>
    </div>
  </div>
</div>